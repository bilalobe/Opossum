<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=bebo><link rel="shortcut icon" href=../../img/favicon.ico><title>Configuration - Opossum Search Documentation</title><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><link href=../../assets/_mkdocstrings.css rel=stylesheet><link href=../../stylesheets/extra.css rel=stylesheet><script>
        // Current page data
        var mkdocs_page_name = "Configuration";
        var mkdocs_page_input_path = "model-integration/configuration.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=../.. class="icon icon-home"> Opossum Search Documentation </a><div role=search> <form id=rtd-search-form class=wy-form action=../../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=../..>Home</a> </li> </ul> <p class=caption><span class=caption-text>Getting Started</span></p> <ul> <li class=toctree-l1><a href=../../technical/getting-started/ class="reference internal">First Steps</a> </li> <li class=toctree-l1><a href=../../technical/system-architecture-overview/ class="reference internal">System Overview</a> </li> <li class=toctree-l1><a href=../../api/getting-started/ class="reference internal">API Reference</a> </li> <li class=toctree-l1><a href=../../technical/devops-guide/ class="reference internal">Developer Quickstart</a> </li> </ul> <p class=caption><span class=caption-text>Core Components</span></p> <ul class=current> <li class=toctree-l1><a class="reference internal">Architecture</a> <ul> <li class=toctree-l2><a href=../../technical/system-architecture-overview/ class="reference internal">System Overview</a> </li> <li class=toctree-l2><a href=../../technical/mcp-architecture/ class="reference internal">Model Context Protocol (MCP)</a> </li> <li class=toctree-l2><a href=../../technical/graphql-api/ class="reference internal">GraphQL API</a> </li> <li class=toctree-l2><a href=../../technical/security-model/ class="reference internal">Security Model</a> </li> <li class=toctree-l2><a href=../../technical/prompt-management/ class="reference internal">Prompt Management</a> </li> </ul> </li> <li class="toctree-l1 current"><a class="reference internal current">Model Integration</a> <ul class=current> <li class=toctree-l2><a href=../architecture/ class="reference internal">Architecture</a> </li> <li class=toctree-l2><a href=../backend-selection/ class="reference internal">Backend Selection</a> </li> <li class=toctree-l2><a href=../capability-matrix/ class="reference internal">Capability Matrix</a> </li> <li class=toctree-l2><a href=../providers/ class="reference internal">Provider Integration</a> </li> <li class="toctree-l2 current"><a class="reference internal current" href=#>Configuration</a> <ul class=current> <li class=toctree-l3><a class="reference internal" href=#overview>Overview</a> </li> <li class=toctree-l3><a class="reference internal" href=#configuration-structure>Configuration Structure</a> </li> <li class=toctree-l3><a class="reference internal" href=#global-configuration-options>Global Configuration Options</a> </li> <li class=toctree-l3><a class="reference internal" href=#provider-specific-configuration>Provider-Specific Configuration</a> <ul> <li class=toctree-l4><a class="reference internal" href=#gemini-configuration>Gemini Configuration</a> </li> <li class=toctree-l4><a class="reference internal" href=#ollama-configuration>Ollama Configuration</a> </li> <li class=toctree-l4><a class="reference internal" href=#transformers-configuration>Transformers Configuration</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#feature-configuration>Feature Configuration</a> </li> <li class=toctree-l3><a class="reference internal" href=#environment-variables-integration>Environment Variables Integration</a> </li> <li class=toctree-l3><a class="reference internal" href=#configuration-validation>Configuration Validation</a> </li> <li class=toctree-l3><a class="reference internal" href=#dynamic-configuration>Dynamic Configuration</a> </li> <li class=toctree-l3><a class="reference internal" href=#configuration-loading>Configuration Loading</a> </li> <li class=toctree-l3><a class="reference internal" href=#complete-configuration-example>Complete Configuration Example</a> </li> <li class=toctree-l3><a class="reference internal" href=#configuration-best-practices>Configuration Best Practices</a> <ul> <li class=toctree-l4><a class="reference internal" href=#general-guidelines>General Guidelines</a> </li> <li class=toctree-l4><a class="reference internal" href=#model-specific-recommendations>Model-Specific Recommendations</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#deployment-scenarios>Deployment Scenarios</a> <ul> <li class=toctree-l4><a class="reference internal" href=#low-resource-environment>Low-Resource Environment</a> </li> <li class=toctree-l4><a class="reference internal" href=#high-performance-environment>High-Performance Environment</a> </li> <li class=toctree-l4><a class="reference internal" href=#high-availability-environment>High-Availability Environment</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#related-documentation>Related Documentation</a> </li> </ul> </li> <li class=toctree-l2><a href=../../technical/hybrid-model-selection/ class="reference internal">Hybrid Selection</a> </li> <li class=toctree-l2><a href=../../technical/prompt-management/ class="reference internal">Prompt Management</a> </li> <li class=toctree-l2><a href=../dspy-integration/ class="reference internal">DSPy Integration</a> </li> <li class=toctree-l2><a href=../dspy-technical/ class="reference internal">DSPy Technical Implementation</a> </li> <li class=toctree-l2><a href=../dspy-examples/ class="reference internal">DSPy Usage Examples</a> </li> <li class=toctree-l2><a href=../dspy-metrics/ class="reference internal">DSPy Metrics & Performance</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Service Availability</a> <ul> <li class=toctree-l2><a href=../../service-availability/context-and-scope/ class="reference internal">Context and Scope</a> </li> <li class=toctree-l2><a href=../../service-availability/quality-requirements/ class="reference internal">Quality Requirements</a> </li> <li class=toctree-l2><a href=../../service-availability/architecture-constraints/ class="reference internal">Architecture Constraints</a> </li> <li class=toctree-l2><a href=../../service-availability/availability-monitoring/ class="reference internal">Availability Monitoring</a> </li> <li class=toctree-l2><a href=../../service-availability/service-outage/ class="reference internal">Error Handling</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Resilience Patterns</a> <ul> <li class=toctree-l2><a href=../../technical/resilience-patterns/ class="reference internal">Core Strategies</a> </li> <li class=toctree-l2><a href=../../technical/error-handling-resilience/ class="reference internal">Error Handling</a> </li> <li class=toctree-l2><a href=../../service-availability/rate-limiting-throttling/ class="reference internal">Rate Limiting</a> </li> <li class=toctree-l2><a href=../../service-availability/log-alerts/ class="reference internal">Logging and Alerts</a> </li> <li class=toctree-l2><a href=../../service-availability/testing-validation/ class="reference internal">Testing and Validation</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Features</span></p> <ul> <li class=toctree-l1><a class="reference internal">Conversation</a> <ul> <li class=toctree-l2><a href=../../conversation/topic-detection/ class="reference internal">Topic Detection</a> </li> <li class=toctree-l2><a href=../../conversation/conversation-flow/ class="reference internal">Conversation Flow</a> </li> <li class=toctree-l2><a href=../../conversation/response-generation/ class="reference internal">Response Generation</a> </li> <li class=toctree-l2><a href=../../conversation/nlp-components/ class="reference internal">NLP Components</a> </li> <li class=toctree-l2><a href=../../conversation/markov-generation/ class="reference internal">Markov Generation</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Image Processing</a> <ul> <li class=toctree-l2><a href=../../image-processing/overview/ class="reference internal">Overview</a> </li> <li class=toctree-l2><a href=../../image-processing/effects/ class="reference internal">Effects and Filters</a> </li> <li class=toctree-l2><a href=../../image-processing/svg-generation/ class="reference internal">SVG Generation</a> </li> <li class=toctree-l2><a href=../../image-processing/optimization/ class="reference internal">Performance Optimization</a> </li> <li class=toctree-l2><a href=../../image-processing/caching/ class="reference internal">Caching Strategy</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Visualizations & Fun</a> <ul> <li class=toctree-l2><a href=../../features/service-vizualizations/ class="reference internal">Service Visualizations</a> </li> <li class=toctree-l2><a href=../../features/national-day/ class="reference internal">National Opossum Day</a> </li> <li class=toctree-l2><a href=../../features/opossum-xenzia/ class="reference internal">Opossum Xenzia</a> </li> <li class=toctree-l2><a href=../../features/easter-eggs/ class="reference internal">Easter Eggs</a> </li> <li class=toctree-l2><a href=../../features/special-events/ class="reference internal">Special Events</a> </li> <li class=toctree-l2><a href=../../features/background-stories/ class="reference internal">Background Stories</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Technical Reference</span></p> <ul> <li class=toctree-l1><a class="reference internal">Infrastructure</a> <ul> <li class=toctree-l2><a href=../../technical/redis-caching-architecture/ class="reference internal">Redis Caching</a> </li> <li class=toctree-l2><a href=../../technical/image-processing-pipeline/ class="reference internal">Image Pipeline</a> </li> <li class=toctree-l2><a href=../../technical/opentelemetry-integration/ class="reference internal">OpenTelemetry</a> </li> <li class=toctree-l2><a href=../../technical/svg-markup/ class="reference internal">SVG Markup</a> </li> <li class=toctree-l2><a href=../../technical/bot-user-simulation/ class="reference internal">Bot User Simulation</a> </li> <li class=toctree-l2><a href=../../infrastructure/optimization-strategies/ class="reference internal">Optimization Strategies</a> </li> <li class=toctree-l2><a href=../../infrastructure/pipeline-optimization/ class="reference internal">Pipeline Optimization</a> </li> <li class=toctree-l2><a href=../../infrastructure/constraint-mapping/ class="reference internal">Constraint Mapping</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">API Documentation</a> <ul> <li class=toctree-l2><a href=../../api/routes/ class="reference internal">Routes</a> </li> <li class=toctree-l2><a href=../../api/request-response/ class="reference internal">Request/Response</a> </li> <li class=toctree-l2><a href=../../api/oauth-configuration/ class="reference internal">OAuth Configuration</a> </li> <li class=toctree-l2><a href=../../api/error-codes/ class="reference internal">Error Codes</a> </li> <li class=toctree-l2><a href=../../api/rate-limits/ class="reference internal">Rate Limits</a> </li> <li class=toctree-l2><a href=../../api/webhooks/ class="reference internal">Webhook Integration</a> </li> <li class=toctree-l2><a href=../../api/health-endpoints/ class="reference internal">Health Endpoints</a> </li> <li class=toctree-l2><a href=../../api/compliance/ class="reference internal">Compliance</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">DSPy Tutorials</a> <ul> <li class=toctree-l2><a href=../../tutorials/dspy/getting-started/ class="reference internal">Getting Started with DSPy</a> </li> <li class=toctree-l2><a href=../../tutorials/dspy/optimizing-prompts/ class="reference internal">Optimizing Prompts</a> </li> <li class=toctree-l2><a href=../../tutorials/dspy/building-pipelines/ class="reference internal">Building Pipelines</a> </li> <li class=toctree-l2><a href=../../tutorials/dspy/advanced-reasoning/ class="reference internal">Advanced Reasoning</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>About</span></p> <ul> <li class=toctree-l1><a href=../../about/history/ class="reference internal">Project History</a> </li> <li class=toctree-l1><a href=../../about/opossumial-way/ class="reference internal">The Opossumial Way</a> </li> <li class=toctree-l1><a href=../../about/team/ class="reference internal">Team</a> </li> <li class=toctree-l1><a href=../../about/roadmap-vision/ class="reference internal">Roadmap & Vision</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=../..>Opossum Search Documentation</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=../.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>Core Components</li> <li class=breadcrumb-item>Model Integration</li> <li class="breadcrumb-item active">Configuration</li> <li class=wy-breadcrumbs-aside> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=model-configuration>Model Configuration<a class=headerlink href=#model-configuration title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>The Opossum Search model integration system provides a flexible configuration framework that allows fine-grained control over model behavior, performance characteristics, and fallback mechanisms. This document details the configuration options available for each model provider and explains how to optimize settings for different deployment scenarios.</p> <h2 id=configuration-structure>Configuration Structure<a class=headerlink href=#configuration-structure title="Permanent link">&para;</a></h2> <p>Model configuration follows a hierarchical structure:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nt>model_integration</span><span class=p>:</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=c1># Global settings</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=nt>default_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini&quot;</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class=nt>enable_fallbacks</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>  </span><span class=nt>request_timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>  </span><span class=c1># Backend-specific configurations</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>  </span><span class=nt>backends</span><span class=p>:</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>    </span><span class=nt>gemini</span><span class=p>:</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>      </span><span class=c1># Gemini-specific settings</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>    </span><span class=nt>ollama</span><span class=p>:</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>      </span><span class=c1># Ollama-specific settings</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=w>    </span><span class=nt>transformers</span><span class=p>:</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=w>      </span><span class=c1># Transformers-specific settings</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=w>  </span><span class=c1># Feature flags and behavior settings</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=w>  </span><span class=nt>features</span><span class=p>:</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=w>    </span><span class=c1># Feature-specific settings</span>
</code></pre></div> <h2 id=global-configuration-options>Global Configuration Options<a class=headerlink href=#global-configuration-options title="Permanent link">&para;</a></h2> <p>These settings apply to the entire model integration system:</p> <table> <thead> <tr> <th>Option</th> <th>Description</th> <th>Default</th> <th>Valid Values</th> </tr> </thead> <tbody> <tr> <td><code>default_backend</code></td> <td>Primary backend to use when no specific selection is made</td> <td><code>"gemini"</code></td> <td><code>"gemini"</code>, <code>"ollama"</code>, <code>"transformers"</code></td> </tr> <tr> <td><code>enable_fallbacks</code></td> <td>Whether to use fallback backends when primary fails</td> <td><code>true</code></td> <td><code>true</code>, <code>false</code></td> </tr> <tr> <td><code>request_timeout</code></td> <td>Global request timeout in seconds</td> <td><code>15</code></td> <td>Positive integer</td> </tr> <tr> <td><code>max_retries</code></td> <td>Maximum number of retries for transient errors</td> <td><code>2</code></td> <td>Non-negative integer</td> </tr> <tr> <td><code>telemetry_enabled</code></td> <td>Whether to collect usage telemetry</td> <td><code>true</code></td> <td><code>true</code>, <code>false</code></td> </tr> <tr> <td><code>cache_responses</code></td> <td>Whether to cache responses</td> <td><code>true</code></td> <td><code>true</code>, <code>false</code></td> </tr> <tr> <td><code>cache_ttl</code></td> <td>Time-to-live for cached responses in seconds</td> <td><code>3600</code></td> <td>Positive integer</td> </tr> </tbody> </table> <h2 id=provider-specific-configuration>Provider-Specific Configuration<a class=headerlink href=#provider-specific-configuration title="Permanent link">&para;</a></h2> <h3 id=gemini-configuration>Gemini Configuration<a class=headerlink href=#gemini-configuration title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nt>gemini</span><span class=p>:</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>api_key</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${GEMINI_API_KEY}&quot;</span><span class=w>  </span><span class=c1># Environment variable reference</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>model</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini-pro&quot;</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>  </span><span class=nt>top_p</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>  </span><span class=nt>top_k</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>  </span><span class=nt>max_tokens</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">800</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>  </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>  </span><span class=nt>max_retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>  </span><span class=nt>safety_settings</span><span class=p>:</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>    </span><span class=nt>harassment</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_only_high&quot;</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>    </span><span class=nt>hate_speech</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_medium_and_above&quot;</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>    </span><span class=nt>sexually_explicit</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_high&quot;</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>    </span><span class=nt>dangerous_content</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_medium_and_above&quot;</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>  </span><span class=nt>quota_management</span><span class=p>:</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>    </span><span class=nt>max_daily_requests</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=w>    </span><span class=nt>max_tokens_per_minute</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=w>    </span><span class=nt>alert_at_percentage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div> <h4 id=gemini-configuration-options>Gemini Configuration Options<a class=headerlink href=#gemini-configuration-options title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Option</th> <th>Description</th> <th>Default</th> <th>Valid Values</th> </tr> </thead> <tbody> <tr> <td><code>api_key</code></td> <td>Gemini API key</td> <td>Required</td> <td>Valid API key string</td> </tr> <tr> <td><code>model</code></td> <td>Gemini model to use</td> <td><code>"gemini-pro"</code></td> <td><code>"gemini-pro"</code>, <code>"gemini-pro-vision"</code></td> </tr> <tr> <td><code>temperature</code></td> <td>Randomness in generation</td> <td><code>0.7</code></td> <td><code>0.0</code> to <code>1.0</code></td> </tr> <tr> <td><code>top_p</code></td> <td>Nucleus sampling parameter</td> <td><code>0.95</code></td> <td><code>0.0</code> to <code>1.0</code></td> </tr> <tr> <td><code>top_k</code></td> <td>Number of top tokens to consider</td> <td><code>40</code></td> <td>Positive integer</td> </tr> <tr> <td><code>max_tokens</code></td> <td>Maximum tokens to generate</td> <td><code>800</code></td> <td>Positive integer</td> </tr> <tr> <td><code>timeout</code></td> <td>Request timeout in seconds</td> <td><code>10</code></td> <td>Positive integer</td> </tr> <tr> <td><code>safety_settings</code></td> <td>Content filtering settings</td> <td>(default values)</td> <td>See safety levels</td> </tr> <tr> <td><code>quota_management</code></td> <td>Settings to manage API quota</td> <td>(default values)</td> <td>See quota options</td> </tr> </tbody> </table> <h3 id=ollama-configuration>Ollama Configuration<a class=headerlink href=#ollama-configuration title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>ollama</span><span class=p>:</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s>&quot;localhost&quot;</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">11434</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>  </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;llama2&quot;</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>      </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>      </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>      </span><span class=nt>context_window</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4096</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;codellama&quot;</span>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>      </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>      </span><span class=nt>context_window</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8192</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;mistral&quot;</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>      </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=w>      </span><span class=nt>context_window</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8192</span>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=w>  </span><span class=nt>concurrency</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=w>  </span><span class=nt>startup_timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=w>  </span><span class=nt>health_check_interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</code></pre></div> <h4 id=ollama-configuration-options>Ollama Configuration Options<a class=headerlink href=#ollama-configuration-options title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Option</th> <th>Description</th> <th>Default</th> <th>Valid Values</th> </tr> </thead> <tbody> <tr> <td><code>host</code></td> <td>Ollama server hostname</td> <td><code>"localhost"</code></td> <td>Valid hostname or IP</td> </tr> <tr> <td><code>port</code></td> <td>Ollama server port</td> <td><code>11434</code></td> <td>Valid port number</td> </tr> <tr> <td><code>timeout</code></td> <td>Request timeout in seconds</td> <td><code>15</code></td> <td>Positive integer</td> </tr> <tr> <td><code>models</code></td> <td>List of models to use</td> <td><code>[{"name": "llama2", "default": true}]</code></td> <td>Array of model configs</td> </tr> <tr> <td><code>concurrency</code></td> <td>Maximum concurrent requests</td> <td><code>2</code></td> <td>Positive integer</td> </tr> <tr> <td><code>startup_timeout</code></td> <td>Time to wait for server startup</td> <td><code>60</code></td> <td>Positive integer</td> </tr> <tr> <td><code>health_check_interval</code></td> <td>Time between health checks in seconds</td> <td><code>300</code></td> <td>Positive integer</td> </tr> </tbody> </table> <p>For each model in the <code>models</code> array:</p> <table> <thead> <tr> <th>Option</th> <th>Description</th> <th>Default</th> <th>Valid Values</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>Model name</td> <td>Required</td> <td>Valid Ollama model name</td> </tr> <tr> <td><code>default</code></td> <td>Whether this is the default model</td> <td><code>false</code></td> <td><code>true</code>, <code>false</code></td> </tr> <tr> <td><code>temperature</code></td> <td>Generation temperature</td> <td><code>0.7</code></td> <td><code>0.0</code> to <code>1.0</code></td> </tr> <tr> <td><code>context_window</code></td> <td>Context window size</td> <td>Model-dependent</td> <td>Positive integer</td> </tr> <tr> <td><code>repeat_penalty</code></td> <td>Penalty for repeated tokens</td> <td><code>1.1</code></td> <td>Positive float</td> </tr> <tr> <td><code>top_p</code></td> <td>Nucleus sampling parameter</td> <td><code>0.9</code></td> <td><code>0.0</code> to <code>1.0</code></td> </tr> </tbody> </table> <h3 id=transformers-configuration>Transformers Configuration<a class=headerlink href=#transformers-configuration title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nt>transformers</span><span class=p>:</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>model_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;./models/local&quot;</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>default_model</span><span class=p>:</span><span class=w> </span><span class=s>&quot;microsoft/phi-2&quot;</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>  </span><span class=nt>device</span><span class=p>:</span><span class=w> </span><span class=s>&quot;auto&quot;</span><span class=w>  </span><span class=c1># &quot;auto&quot;, &quot;cpu&quot;, &quot;cuda&quot;, &quot;mps&quot;</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>  </span><span class=nt>quantization</span><span class=p>:</span><span class=w> </span><span class=s>&quot;int8&quot;</span><span class=w>  </span><span class=c1># &quot;none&quot;, &quot;int8&quot;, &quot;int4&quot;</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>  </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;microsoft/phi-2&quot;</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>      </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;TheBloke/Llama-2-7B-GGUF&quot;</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class=s>&quot;llama-2-7b.Q4_K_M.gguf&quot;</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>      </span><span class=nt>quantization</span><span class=p>:</span><span class=w> </span><span class=s>&quot;int4&quot;</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;TinyLlama/TinyLlama-1.1B-Chat-v1.0&quot;</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>  </span><span class=nt>max_memory</span><span class=p>:</span><span class=w> </span><span class=s>&quot;4GB&quot;</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>  </span><span class=nt>low_memory_mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>  </span><span class=nt>cpu_threads</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>  </span><span class=nt>generate_params</span><span class=p>:</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>    </span><span class=nt>max_new_tokens</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">512</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>    </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>    </span><span class=nt>top_p</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>    </span><span class=nt>top_k</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=w>    </span><span class=nt>repetition_penalty</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1.1</span>
</code></pre></div> <h4 id=transformers-configuration-options>Transformers Configuration Options<a class=headerlink href=#transformers-configuration-options title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Option</th> <th>Description</th> <th>Default</th> <th>Valid Values</th> </tr> </thead> <tbody> <tr> <td><code>model_path</code></td> <td>Path to store model files</td> <td><code>"./models/local"</code></td> <td>Valid directory path</td> </tr> <tr> <td><code>default_model</code></td> <td>Default model identifier</td> <td><code>"microsoft/phi-2"</code></td> <td>Valid model ID or name</td> </tr> <tr> <td><code>device</code></td> <td>Compute device to use</td> <td><code>"auto"</code></td> <td><code>"auto"</code>, <code>"cpu"</code>, <code>"cuda"</code>, <code>"mps"</code></td> </tr> <tr> <td><code>quantization</code></td> <td>Quantization level</td> <td><code>"int8"</code></td> <td><code>"none"</code>, <code>"int8"</code>, <code>"int4"</code></td> </tr> <tr> <td><code>models</code></td> <td>List of models to use</td> <td>(default values)</td> <td>Array of model configs</td> </tr> <tr> <td><code>max_memory</code></td> <td>Maximum memory allocation</td> <td><code>"4GB"</code></td> <td>Memory size string</td> </tr> <tr> <td><code>low_memory_mode</code></td> <td>Optimize for low memory</td> <td><code>false</code></td> <td><code>true</code>, <code>false</code></td> </tr> <tr> <td><code>cpu_threads</code></td> <td>CPU threads for computation</td> <td><code>4</code></td> <td>Positive integer</td> </tr> <tr> <td><code>generate_params</code></td> <td>Generation parameters</td> <td>(default values)</td> <td>See generation options</td> </tr> </tbody> </table> <p>For each model in the <code>models</code> array:</p> <table> <thead> <tr> <th>Option</th> <th>Description</th> <th>Default</th> <th>Valid Values</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>Model identifier or HF repo</td> <td>Required</td> <td>Valid model ID or name</td> </tr> <tr> <td><code>default</code></td> <td>Whether this is the default model</td> <td><code>false</code></td> <td><code>true</code>, <code>false</code></td> </tr> <tr> <td><code>file</code></td> <td>Specific model file for GGUF models</td> <td>Model-dependent</td> <td>Valid filename</td> </tr> <tr> <td><code>quantization</code></td> <td>Model-specific quantization</td> <td>Global setting</td> <td><code>"none"</code>, <code>"int8"</code>, <code>"int4"</code></td> </tr> </tbody> </table> <h2 id=feature-configuration>Feature Configuration<a class=headerlink href=#feature-configuration title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>features</span><span class=p>:</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>dynamic_model_selection</span><span class=p>:</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=nt>capability_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=nt>performance_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=nt>cost_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>  </span><span class=nt>multimodal</span><span class=p>:</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>    </span><span class=nt>preferred_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini&quot;</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>    </span><span class=nt>fallback_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;transformers&quot;</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=w>  </span><span class=nt>context_management</span><span class=p>:</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=w>    </span><span class=nt>max_history_items</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=w>    </span><span class=nt>include_system_messages</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=w>  </span><span class=nt>telemetry</span><span class=p>:</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=w>    </span><span class=nt>sampling_rate</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=w>    </span><span class=nt>detailed_metrics</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div> <h2 id=environment-variables-integration>Environment Variables Integration<a class=headerlink href=#environment-variables-integration title="Permanent link">&para;</a></h2> <p>The configuration system supports environment variable substitution:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>gemini</span><span class=p>:</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>api_key</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${GEMINI_API_KEY}&quot;</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=nt>ollama</span><span class=p>:</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${OLLAMA_HOST:-localhost}&quot;</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${OLLAMA_PORT:-11434}&quot;</span>
</code></pre></div> <p>Environment variables can have default values using the <code>:-</code> syntax.</p> <h2 id=configuration-validation>Configuration Validation<a class=headerlink href=#configuration-validation title="Permanent link">&para;</a></h2> <p>The system validates configuration at startup:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=k>def</span><span class=w> </span><span class=nf>validate_config</span><span class=p>(</span><span class=n>config</span><span class=p>):</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate model integration configuration&quot;&quot;&quot;</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>    <span class=n>errors</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>    <span class=n>warnings</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>    <span class=c1># Check for required settings</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>    <span class=k>if</span> <span class=s1>&#39;backends&#39;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>config</span><span class=p>:</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>        <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;Missing &#39;backends&#39; section in configuration&quot;</span><span class=p>)</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>    <span class=c1># Validate default_backend</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>    <span class=n>default_backend</span> <span class=o>=</span> <span class=n>config</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;default_backend&#39;</span><span class=p>)</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>    <span class=k>if</span> <span class=n>default_backend</span> <span class=ow>and</span> <span class=n>default_backend</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>config</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;backends&#39;</span><span class=p>,</span> <span class=p>{}):</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>        <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Default backend &#39;</span><span class=si>{</span><span class=n>default_backend</span><span class=si>}</span><span class=s2>&#39; not defined in backends section&quot;</span><span class=p>)</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>    <span class=c1># Validate Gemini settings if present</span>
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>    <span class=k>if</span> <span class=s1>&#39;gemini&#39;</span> <span class=ow>in</span> <span class=n>config</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;backends&#39;</span><span class=p>,</span> <span class=p>{}):</span>
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>        <span class=n>gemini_config</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=s1>&#39;backends&#39;</span><span class=p>][</span><span class=s1>&#39;gemini&#39;</span><span class=p>]</span>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>gemini_config</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;api_key&#39;</span><span class=p>):</span>
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>            <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;Missing Gemini API key&quot;</span><span class=p>)</span>
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>    <span class=c1># Report validation results</span>
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a>    <span class=k>if</span> <span class=n>errors</span><span class=p>:</span>
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a>        <span class=k>raise</span> <span class=n>ConfigurationError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Configuration validation failed: </span><span class=si>{</span><span class=s1>&#39;, &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>errors</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a>
<a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a>    <span class=k>if</span> <span class=n>warnings</span><span class=p>:</span>
<a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a>        <span class=k>for</span> <span class=n>warning</span> <span class=ow>in</span> <span class=n>warnings</span><span class=p>:</span>
<a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Configuration warning: </span><span class=si>{</span><span class=n>warning</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a>
<a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a>    <span class=k>return</span> <span class=kc>True</span>
</code></pre></div> <h2 id=dynamic-configuration>Dynamic Configuration<a class=headerlink href=#dynamic-configuration title="Permanent link">&para;</a></h2> <p>The system supports runtime configuration updates:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=k>def</span><span class=w> </span><span class=nf>update_model_config</span><span class=p>(</span><span class=n>config_updates</span><span class=p>):</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Update model configuration at runtime&quot;&quot;&quot;</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>    <span class=c1># Get current configuration</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>    <span class=n>current_config</span> <span class=o>=</span> <span class=n>get_model_config</span><span class=p>()</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>    <span class=c1># Apply updates (deep merge)</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>    <span class=n>updated_config</span> <span class=o>=</span> <span class=n>deep_merge</span><span class=p>(</span><span class=n>current_config</span><span class=p>,</span> <span class=n>config_updates</span><span class=p>)</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>    <span class=c1># Validate updated configuration</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>    <span class=n>validate_config</span><span class=p>(</span><span class=n>updated_config</span><span class=p>)</span>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>    <span class=c1># Apply new configuration</span>
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>    <span class=n>set_model_config</span><span class=p>(</span><span class=n>updated_config</span><span class=p>)</span>
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>    <span class=c1># Notify components of configuration change</span>
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>    <span class=n>event_bus</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=s2>&quot;config.updated&quot;</span><span class=p>,</span> <span class=p>{</span>
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>        <span class=s2>&quot;component&quot;</span><span class=p>:</span> <span class=s2>&quot;model_integration&quot;</span><span class=p>,</span>
<a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>        <span class=s2>&quot;old_config&quot;</span><span class=p>:</span> <span class=n>current_config</span><span class=p>,</span>
<a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>        <span class=s2>&quot;new_config&quot;</span><span class=p>:</span> <span class=n>updated_config</span>
<a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>    <span class=p>})</span>
<a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a>
<a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a>    <span class=k>return</span> <span class=n>updated_config</span>
</code></pre></div> <h2 id=configuration-loading>Configuration Loading<a class=headerlink href=#configuration-loading title="Permanent link">&para;</a></h2> <p>The system loads configuration from multiple sources:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=k>def</span><span class=w> </span><span class=nf>load_model_config</span><span class=p>():</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Load model configuration from multiple sources&quot;&quot;&quot;</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=c1># Start with default configuration</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>default_model_config</span><span class=p>()</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>    <span class=c1># Load from configuration file</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>    <span class=n>file_config</span> <span class=o>=</span> <span class=n>load_config_file</span><span class=p>(</span><span class=s2>&quot;config/model_integration.yaml&quot;</span><span class=p>)</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>deep_merge</span><span class=p>(</span><span class=n>config</span><span class=p>,</span> <span class=n>file_config</span><span class=p>)</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>    <span class=c1># Load from environment variables</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>    <span class=n>env_config</span> <span class=o>=</span> <span class=n>load_from_environment</span><span class=p>(</span><span class=s2>&quot;MODEL_&quot;</span><span class=p>)</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>deep_merge</span><span class=p>(</span><span class=n>config</span><span class=p>,</span> <span class=n>env_config</span><span class=p>)</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>    <span class=c1># Process environment variable references</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>process_env_vars</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>    <span class=c1># Validate configuration</span>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a>    <span class=n>validate_config</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>    <span class=k>return</span> <span class=n>config</span>
</code></pre></div> <h2 id=complete-configuration-example>Complete Configuration Example<a class=headerlink href=#complete-configuration-example title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>model_integration</span><span class=p>:</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=nt>default_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini&quot;</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span><span class=nt>enable_fallbacks</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>  </span><span class=nt>request_timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>  </span><span class=nt>max_retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>  </span><span class=nt>telemetry_enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>  </span><span class=nt>cache_responses</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>  </span><span class=nt>cache_ttl</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3600</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>  </span><span class=nt>backends</span><span class=p>:</span>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>    </span><span class=nt>gemini</span><span class=p>:</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=w>      </span><span class=nt>api_key</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${GEMINI_API_KEY}&quot;</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=w>      </span><span class=nt>model</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini-pro&quot;</span>
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=w>      </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span>
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=w>      </span><span class=nt>top_p</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>      </span><span class=nt>top_k</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>      </span><span class=nt>max_tokens</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">800</span>
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=w>      </span><span class=nt>safety_settings</span><span class=p>:</span>
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=w>        </span><span class=nt>harassment</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_only_high&quot;</span>
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=w>        </span><span class=nt>hate_speech</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_medium_and_above&quot;</span>
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a><span class=w>        </span><span class=nt>sexually_explicit</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_high&quot;</span>
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=w>        </span><span class=nt>dangerous_content</span><span class=p>:</span><span class=w> </span><span class=s>&quot;block_medium_and_above&quot;</span>
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=w>      </span><span class=nt>quota_management</span><span class=p>:</span>
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a><span class=w>        </span><span class=nt>max_daily_requests</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=w>        </span><span class=nt>max_tokens_per_minute</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
<a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a><span class=w>        </span><span class=nt>alert_at_percentage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a>
<a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a><span class=w>    </span><span class=nt>ollama</span><span class=p>:</span>
<a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a><span class=w>      </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${OLLAMA_HOST:-localhost}&quot;</span>
<a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${OLLAMA_PORT:-11434}&quot;</span>
<a id=__codelineno-9-32 name=__codelineno-9-32 href=#__codelineno-9-32></a><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<a id=__codelineno-9-33 name=__codelineno-9-33 href=#__codelineno-9-33></a><span class=w>      </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-9-34 name=__codelineno-9-34 href=#__codelineno-9-34></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;llama2&quot;</span>
<a id=__codelineno-9-35 name=__codelineno-9-35 href=#__codelineno-9-35></a><span class=w>          </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-36 name=__codelineno-9-36 href=#__codelineno-9-36></a><span class=w>          </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span>
<a id=__codelineno-9-37 name=__codelineno-9-37 href=#__codelineno-9-37></a><span class=w>          </span><span class=nt>context_window</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4096</span>
<a id=__codelineno-9-38 name=__codelineno-9-38 href=#__codelineno-9-38></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;codellama&quot;</span>
<a id=__codelineno-9-39 name=__codelineno-9-39 href=#__codelineno-9-39></a><span class=w>          </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<a id=__codelineno-9-40 name=__codelineno-9-40 href=#__codelineno-9-40></a><span class=w>          </span><span class=nt>context_window</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8192</span>
<a id=__codelineno-9-41 name=__codelineno-9-41 href=#__codelineno-9-41></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;mistral&quot;</span>
<a id=__codelineno-9-42 name=__codelineno-9-42 href=#__codelineno-9-42></a><span class=w>          </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span>
<a id=__codelineno-9-43 name=__codelineno-9-43 href=#__codelineno-9-43></a><span class=w>          </span><span class=nt>context_window</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8192</span>
<a id=__codelineno-9-44 name=__codelineno-9-44 href=#__codelineno-9-44></a><span class=w>      </span><span class=nt>concurrency</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id=__codelineno-9-45 name=__codelineno-9-45 href=#__codelineno-9-45></a><span class=w>      </span><span class=nt>startup_timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<a id=__codelineno-9-46 name=__codelineno-9-46 href=#__codelineno-9-46></a><span class=w>      </span><span class=nt>health_check_interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<a id=__codelineno-9-47 name=__codelineno-9-47 href=#__codelineno-9-47></a>
<a id=__codelineno-9-48 name=__codelineno-9-48 href=#__codelineno-9-48></a><span class=w>    </span><span class=nt>transformers</span><span class=p>:</span>
<a id=__codelineno-9-49 name=__codelineno-9-49 href=#__codelineno-9-49></a><span class=w>      </span><span class=nt>model_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;./models/local&quot;</span>
<a id=__codelineno-9-50 name=__codelineno-9-50 href=#__codelineno-9-50></a><span class=w>      </span><span class=nt>default_model</span><span class=p>:</span><span class=w> </span><span class=s>&quot;microsoft/phi-2&quot;</span>
<a id=__codelineno-9-51 name=__codelineno-9-51 href=#__codelineno-9-51></a><span class=w>      </span><span class=nt>device</span><span class=p>:</span><span class=w> </span><span class=s>&quot;auto&quot;</span>
<a id=__codelineno-9-52 name=__codelineno-9-52 href=#__codelineno-9-52></a><span class=w>      </span><span class=nt>quantization</span><span class=p>:</span><span class=w> </span><span class=s>&quot;int8&quot;</span>
<a id=__codelineno-9-53 name=__codelineno-9-53 href=#__codelineno-9-53></a><span class=w>      </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-9-54 name=__codelineno-9-54 href=#__codelineno-9-54></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;microsoft/phi-2&quot;</span>
<a id=__codelineno-9-55 name=__codelineno-9-55 href=#__codelineno-9-55></a><span class=w>          </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-56 name=__codelineno-9-56 href=#__codelineno-9-56></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;TheBloke/Llama-2-7B-GGUF&quot;</span>
<a id=__codelineno-9-57 name=__codelineno-9-57 href=#__codelineno-9-57></a><span class=w>          </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class=s>&quot;llama-2-7b.Q4_K_M.gguf&quot;</span>
<a id=__codelineno-9-58 name=__codelineno-9-58 href=#__codelineno-9-58></a><span class=w>          </span><span class=nt>quantization</span><span class=p>:</span><span class=w> </span><span class=s>&quot;int4&quot;</span>
<a id=__codelineno-9-59 name=__codelineno-9-59 href=#__codelineno-9-59></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;TinyLlama/TinyLlama-1.1B-Chat-v1.0&quot;</span>
<a id=__codelineno-9-60 name=__codelineno-9-60 href=#__codelineno-9-60></a><span class=w>      </span><span class=nt>max_memory</span><span class=p>:</span><span class=w> </span><span class=s>&quot;4GB&quot;</span>
<a id=__codelineno-9-61 name=__codelineno-9-61 href=#__codelineno-9-61></a><span class=w>      </span><span class=nt>low_memory_mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id=__codelineno-9-62 name=__codelineno-9-62 href=#__codelineno-9-62></a><span class=w>      </span><span class=nt>cpu_threads</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id=__codelineno-9-63 name=__codelineno-9-63 href=#__codelineno-9-63></a><span class=w>      </span><span class=nt>generate_params</span><span class=p>:</span>
<a id=__codelineno-9-64 name=__codelineno-9-64 href=#__codelineno-9-64></a><span class=w>        </span><span class=nt>max_new_tokens</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">512</span>
<a id=__codelineno-9-65 name=__codelineno-9-65 href=#__codelineno-9-65></a><span class=w>        </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span>
<a id=__codelineno-9-66 name=__codelineno-9-66 href=#__codelineno-9-66></a><span class=w>        </span><span class=nt>top_p</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
<a id=__codelineno-9-67 name=__codelineno-9-67 href=#__codelineno-9-67></a><span class=w>        </span><span class=nt>top_k</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<a id=__codelineno-9-68 name=__codelineno-9-68 href=#__codelineno-9-68></a><span class=w>        </span><span class=nt>repetition_penalty</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1.1</span>
<a id=__codelineno-9-69 name=__codelineno-9-69 href=#__codelineno-9-69></a>
<a id=__codelineno-9-70 name=__codelineno-9-70 href=#__codelineno-9-70></a><span class=w>  </span><span class=nt>features</span><span class=p>:</span>
<a id=__codelineno-9-71 name=__codelineno-9-71 href=#__codelineno-9-71></a><span class=w>    </span><span class=nt>dynamic_model_selection</span><span class=p>:</span>
<a id=__codelineno-9-72 name=__codelineno-9-72 href=#__codelineno-9-72></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-73 name=__codelineno-9-73 href=#__codelineno-9-73></a><span class=w>      </span><span class=nt>capability_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<a id=__codelineno-9-74 name=__codelineno-9-74 href=#__codelineno-9-74></a><span class=w>      </span><span class=nt>performance_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<a id=__codelineno-9-75 name=__codelineno-9-75 href=#__codelineno-9-75></a><span class=w>      </span><span class=nt>cost_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<a id=__codelineno-9-76 name=__codelineno-9-76 href=#__codelineno-9-76></a>
<a id=__codelineno-9-77 name=__codelineno-9-77 href=#__codelineno-9-77></a><span class=w>    </span><span class=nt>multimodal</span><span class=p>:</span>
<a id=__codelineno-9-78 name=__codelineno-9-78 href=#__codelineno-9-78></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-79 name=__codelineno-9-79 href=#__codelineno-9-79></a><span class=w>      </span><span class=nt>preferred_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini&quot;</span>
<a id=__codelineno-9-80 name=__codelineno-9-80 href=#__codelineno-9-80></a><span class=w>      </span><span class=nt>fallback_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;transformers&quot;</span>
<a id=__codelineno-9-81 name=__codelineno-9-81 href=#__codelineno-9-81></a>
<a id=__codelineno-9-82 name=__codelineno-9-82 href=#__codelineno-9-82></a><span class=w>    </span><span class=nt>context_management</span><span class=p>:</span>
<a id=__codelineno-9-83 name=__codelineno-9-83 href=#__codelineno-9-83></a><span class=w>      </span><span class=nt>max_history_items</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id=__codelineno-9-84 name=__codelineno-9-84 href=#__codelineno-9-84></a><span class=w>      </span><span class=nt>include_system_messages</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-85 name=__codelineno-9-85 href=#__codelineno-9-85></a>
<a id=__codelineno-9-86 name=__codelineno-9-86 href=#__codelineno-9-86></a><span class=w>    </span><span class=nt>telemetry</span><span class=p>:</span>
<a id=__codelineno-9-87 name=__codelineno-9-87 href=#__codelineno-9-87></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-9-88 name=__codelineno-9-88 href=#__codelineno-9-88></a><span class=w>      </span><span class=nt>sampling_rate</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<a id=__codelineno-9-89 name=__codelineno-9-89 href=#__codelineno-9-89></a><span class=w>      </span><span class=nt>detailed_metrics</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div> <h2 id=configuration-best-practices>Configuration Best Practices<a class=headerlink href=#configuration-best-practices title="Permanent link">&para;</a></h2> <h3 id=general-guidelines>General Guidelines<a class=headerlink href=#general-guidelines title="Permanent link">&para;</a></h3> <ol> <li> <p><strong>Use Environment Variables for Secrets</strong></p> <ul> <li>Always use environment variables for API keys and sensitive information</li> <li>Provide clear documentation on required environment variables</li> </ul> </li> <li> <p><strong>Provide Sensible Defaults</strong></p> <ul> <li>Configure default values that work in most scenarios</li> <li>Document the reasoning behind default values</li> </ul> </li> <li> <p><strong>Layer Configuration</strong></p> <ul> <li>Use a layered approach to configuration (defaults  files  environment)</li> <li>Allow selective overrides without replacing entire configuration</li> </ul> </li> <li> <p><strong>Validate Configuration</strong></p> <ul> <li>Perform thorough validation at startup</li> <li>Provide clear error messages for configuration issues</li> </ul> </li> </ol> <h3 id=model-specific-recommendations>Model-Specific Recommendations<a class=headerlink href=#model-specific-recommendations title="Permanent link">&para;</a></h3> <h4 id=gemini>Gemini<a class=headerlink href=#gemini title="Permanent link">&para;</a></h4> <ul> <li>Configure appropriate <code>safety_settings</code> based on your application's use case</li> <li>Set up <code>quota_management</code> to prevent unexpected billing</li> <li>Use a lower <code>temperature</code> (0.3-0.5) for factual responses, higher (0.7-0.9) for creative content</li> </ul> <h4 id=ollama>Ollama<a class=headerlink href=#ollama title="Permanent link">&para;</a></h4> <ul> <li>Configure <code>concurrency</code> based on your hardware capabilities</li> <li>Use specialized models for specific tasks (CodeLlama for code, Mistral for general text)</li> <li>Configure <code>health_check_interval</code> based on your stability requirements</li> </ul> <h4 id=transformers>Transformers<a class=headerlink href=#transformers title="Permanent link">&para;</a></h4> <ul> <li>Use appropriate <code>quantization</code> based on available memory</li> <li>Configure <code>device</code> correctly for your hardware</li> <li>Use the smallest model that meets your quality requirements</li> </ul> <h2 id=deployment-scenarios>Deployment Scenarios<a class=headerlink href=#deployment-scenarios title="Permanent link">&para;</a></h2> <h3 id=low-resource-environment>Low-Resource Environment<a class=headerlink href=#low-resource-environment title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>model_integration</span><span class=p>:</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>default_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;transformers&quot;</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nt>enable_fallbacks</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>  </span><span class=nt>backends</span><span class=p>:</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=nt>transformers</span><span class=p>:</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>      </span><span class=nt>device</span><span class=p>:</span><span class=w> </span><span class=s>&quot;cpu&quot;</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>      </span><span class=nt>quantization</span><span class=p>:</span><span class=w> </span><span class=s>&quot;int4&quot;</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>      </span><span class=nt>default_model</span><span class=p>:</span><span class=w> </span><span class=s>&quot;TinyLlama/TinyLlama-1.1B-Chat-v1.0&quot;</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>      </span><span class=nt>low_memory_mode</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>      </span><span class=nt>generate_params</span><span class=p>:</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=w>        </span><span class=nt>max_new_tokens</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">256</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>    </span><span class=nt>ollama</span><span class=p>:</span>
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>      </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tinyllama&quot;</span>
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>          </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=w>      </span><span class=nt>concurrency</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a>
<a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a><span class=w>    </span><span class=c1># No Gemini configuration in low-resource scenario</span>
<a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a>
<a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a><span class=w>  </span><span class=nt>features</span><span class=p>:</span>
<a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a><span class=w>    </span><span class=nt>dynamic_model_selection</span><span class=p>:</span>
<a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w>  </span><span class=c1># Simplify for performance</span>
</code></pre></div> <h3 id=high-performance-environment>High-Performance Environment<a class=headerlink href=#high-performance-environment title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>model_integration</span><span class=p>:</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>default_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini&quot;</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>  </span><span class=nt>backends</span><span class=p>:</span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=nt>gemini</span><span class=p>:</span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>      </span><span class=nt>max_tokens</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1500</span>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>    </span><span class=nt>ollama</span><span class=p>:</span>
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>      </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s>&quot;ollama-server&quot;</span><span class=w>  </span><span class=c1># Dedicated server</span>
<a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>      </span><span class=nt>concurrency</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>      </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;llama2:70b&quot;</span>
<a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=w>          </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a>
<a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>    </span><span class=nt>transformers</span><span class=p>:</span>
<a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=w>      </span><span class=nt>device</span><span class=p>:</span><span class=w> </span><span class=s>&quot;cuda&quot;</span>
<a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=w>      </span><span class=nt>quantization</span><span class=p>:</span><span class=w> </span><span class=s>&quot;none&quot;</span><span class=w>  </span><span class=c1># Full precision for quality</span>
<a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a><span class=w>      </span><span class=nt>default_model</span><span class=p>:</span><span class=w> </span><span class=s>&quot;meta-llama/Llama-2-13b-chat-hf&quot;</span>
<a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a><span class=w>      </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;meta-llama/Llama-2-13b-chat-hf&quot;</span>
<a id=__codelineno-11-21 name=__codelineno-11-21 href=#__codelineno-11-21></a><span class=w>          </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <h3 id=high-availability-environment>High-Availability Environment<a class=headerlink href=#high-availability-environment title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nt>model_integration</span><span class=p>:</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=nt>default_backend</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gemini&quot;</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span><span class=nt>enable_fallbacks</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=nt>request_timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8</span><span class=w>  </span><span class=c1># Lower timeout for faster fallback</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>  </span><span class=nt>max_retries</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w>  </span><span class=c1># Fewer retries, faster fallback</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>  </span><span class=nt>backends</span><span class=p>:</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>    </span><span class=nt>gemini</span><span class=p>:</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>      </span><span class=nt>api_key</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${GEMINI_API_KEY}&quot;</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>    </span><span class=nt>ollama</span><span class=p>:</span>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>      </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=s>&quot;${OLLAMA_HOST}&quot;</span>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>      </span><span class=nt>models</span><span class=p>:</span>
<a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;llama2&quot;</span>
<a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=w>          </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=w>      </span><span class=nt>startup_timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=w>      </span><span class=nt>health_check_interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">60</span><span class=w>  </span><span class=c1># More frequent health checks</span>
<a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a>
<a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=w>    </span><span class=nt>transformers</span><span class=p>:</span>
<a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a><span class=w>      </span><span class=nt>default_model</span><span class=p>:</span><span class=w> </span><span class=s>&quot;microsoft/phi-2&quot;</span>
<a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a><span class=w>      </span><span class=nt>device</span><span class=p>:</span><span class=w> </span><span class=s>&quot;cuda&quot;</span>
<a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a>
<a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a><span class=w>  </span><span class=nt>features</span><span class=p>:</span>
<a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a><span class=w>    </span><span class=nt>dynamic_model_selection</span><span class=p>:</span>
<a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a><span class=w>      </span><span class=c1># Weight availability higher</span>
<a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a><span class=w>      </span><span class=nt>capability_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a><span class=w>      </span><span class=nt>performance_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a><span class=w>      </span><span class=nt>cost_weight</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</code></pre></div> <h2 id=related-documentation>Related Documentation<a class=headerlink href=#related-documentation title="Permanent link">&para;</a></h2> <ul> <li>Model Integration Architecture</li> <li>Backend Selection</li> <li>Capability Matrix</li> <li>Provider Integration</li> <li>Infrastructure Configuration Management</li> </ul> </div> </div><footer> <div class=rst-footer-buttons role=navigation aria-label="Footer Navigation"> <a href=../providers/ class="btn btn-neutral float-left" title="Provider Integration"><span class="icon icon-circle-arrow-left"></span> Previous</a> <a href=../../technical/hybrid-model-selection/ class="btn btn-neutral float-right" title="Hybrid Selection">Next <span class="icon icon-circle-arrow-right"></span></a> </div> <hr> <div role=contentinfo> <!-- Copyright etc --> </div> Built with <a href=https://www.mkdocs.org/ >MkDocs</a> using a <a href=https://github.com/readthedocs/sphinx_rtd_theme>theme</a> provided by <a href=https://readthedocs.org>Read the Docs</a>. </footer> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span><a href=../providers/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../../technical/hybrid-model-selection/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../../js/jquery-3.6.0.min.js></script> <script>var base_url = "../..";</script> <script src=../../js/theme_extra.js></script> <script src=../../js/theme.js></script> <script src=../../search/main.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 