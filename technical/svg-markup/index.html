<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=bebo><link rel="shortcut icon" href=../../img/favicon.ico><title>SVG Markup - Opossum Search Documentation</title><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><script>
        // Current page data
        var mkdocs_page_name = "SVG Markup";
        var mkdocs_page_input_path = "technical\\svg-markup.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=../.. class="icon icon-home"> Opossum Search Documentation </a><div role=search> <form id=rtd-search-form class=wy-form action=../../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=../..>Home</a> </li> </ul> <p class=caption><span class=caption-text>Getting Started</span></p> <ul> <li class=toctree-l1><a href=../getting-started/ class="reference internal">First Steps</a> </li> <li class=toctree-l1><a href=../system-architecture-overview/ class="reference internal">System Overview</a> </li> <li class=toctree-l1><a href=../../api/getting-started/ class="reference internal">API Reference</a> </li> <li class=toctree-l1><a href=../devops-guide/ class="reference internal">Developer Quickstart</a> </li> </ul> <p class=caption><span class=caption-text>Core Components</span></p> <ul> <li class=toctree-l1><a class="reference internal">Architecture</a> <ul> <li class=toctree-l2><a href=../system-architecture-overview/ class="reference internal">System Overview</a> </li> <li class=toctree-l2><a href=../graphql-api/ class="reference internal">GraphQL API</a> </li> <li class=toctree-l2><a href=../security-model/ class="reference internal">Security Model</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Model Integration</a> <ul> <li class=toctree-l2><a href=../../model-integration/architecture/ class="reference internal">Architecture</a> </li> <li class=toctree-l2><a href=../../model-integration/backend-selection/ class="reference internal">Backend Selection</a> </li> <li class=toctree-l2><a href=../../model-integration/capability-matrix/ class="reference internal">Capability Matrix</a> </li> <li class=toctree-l2><a href=../../model-integration/providers/ class="reference internal">Provider Integration</a> </li> <li class=toctree-l2><a href=../../model-integration/configuration/ class="reference internal">Configuration</a> </li> <li class=toctree-l2><a href=../hybrid-model-selection/ class="reference internal">Hybrid Selection</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Service Availability</a> <ul> <li class=toctree-l2><a href=../../service-availability/context-and-scope/ class="reference internal">Context and Scope</a> </li> <li class=toctree-l2><a href=../../service-availability/quality-requirements/ class="reference internal">Quality Requirements</a> </li> <li class=toctree-l2><a href=../../service-availability/architecture-constraints/ class="reference internal">Architecture Constraints</a> </li> <li class=toctree-l2><a href=../../service-availability/availability-monitoring/ class="reference internal">Availability Monitoring</a> </li> <li class=toctree-l2><a href=../../service-availability/service-outage/ class="reference internal">Error Handling</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Resilience Patterns</a> <ul> <li class=toctree-l2><a href=../resilience-patterns/ class="reference internal">Core Strategies</a> </li> <li class=toctree-l2><a href=../error-handling-resilience/ class="reference internal">Error Handling</a> </li> <li class=toctree-l2><a href=../../service-availability/rate-limiting-throttling/ class="reference internal">Rate Limiting</a> </li> <li class=toctree-l2><a href=../../service-availability/log-alerts/ class="reference internal">Logging and Alerts</a> </li> <li class=toctree-l2><a href=../../service-availability/testing-validation/ class="reference internal">Testing and Validation</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Features</span></p> <ul> <li class=toctree-l1><a class="reference internal">Conversation</a> <ul> <li class=toctree-l2><a href=../../conversation/topic-detection/ class="reference internal">Topic Detection</a> </li> <li class=toctree-l2><a href=../../conversation/conversation-flow/ class="reference internal">Conversation Flow</a> </li> <li class=toctree-l2><a href=../../conversation/response-generation/ class="reference internal">Response Generation</a> </li> <li class=toctree-l2><a href=../../conversation/nlp-components/ class="reference internal">NLP Components</a> </li> <li class=toctree-l2><a href=../../conversation/markov-generation/ class="reference internal">Markov Generation</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Image Processing</a> <ul> <li class=toctree-l2><a href=../../image-processing/overview/ class="reference internal">Overview</a> </li> <li class=toctree-l2><a href=../../image-processing/effects/ class="reference internal">Effects and Filters</a> </li> <li class=toctree-l2><a href=../../image-processing/svg-generation/ class="reference internal">SVG Generation</a> </li> <li class=toctree-l2><a href=../../image-processing/optimization/ class="reference internal">Performance Optimization</a> </li> <li class=toctree-l2><a href=../../image-processing/caching/ class="reference internal">Caching Strategy</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Visualizations & Fun</a> <ul> <li class=toctree-l2><a href=../../features/service-vizualizations/ class="reference internal">Service Visualizations</a> </li> <li class=toctree-l2><a href=../../features/national-day/ class="reference internal">National Opossum Day</a> </li> <li class=toctree-l2><a href=../../features/easter-eggs/ class="reference internal">Easter Eggs</a> </li> <li class=toctree-l2><a href=../../features/special-events/ class="reference internal">Special Events</a> </li> <li class=toctree-l2><a href=../../features/background-stories/ class="reference internal">Background Stories</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Technical Reference</span></p> <ul class=current> <li class="toctree-l1 current"><a class="reference internal current">Infrastructure</a> <ul class=current> <li class=toctree-l2><a href=../redis-caching-architecture/ class="reference internal">Redis Caching</a> </li> <li class=toctree-l2><a href=../image-processing-pipeline/ class="reference internal">Image Pipeline</a> </li> <li class=toctree-l2><a href=../opentelemetry-integration/ class="reference internal">OpenTelemetry</a> </li> <li class="toctree-l2 current"><a class="reference internal current" href=#>SVG Markup</a> <ul class=current> <li class=toctree-l3><a class="reference internal" href=#overview-llm-driven-svg-generation>Overview: LLM-Driven SVG Generation</a> </li> <li class=toctree-l3><a class="reference internal" href=#security-analysis>Security Analysis</a> <ul> <li class=toctree-l4><a class="reference internal" href=#why-svg-markup-generation-is-secure>Why SVG Markup Generation is Secure</a> </li> <li class=toctree-l4><a class="reference internal" href=#comparison-with-script-based-drawing>Comparison with Script-Based Drawing</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#implementation-advantages>Implementation Advantages</a> </li> <li class=toctree-l3><a class="reference internal" href=#example-implementation>Example Implementation</a> </li> <li class=toctree-l3><a class="reference internal" href=#related-research-and-implementations>Related Research and Implementations</a> <ul> <li class=toctree-l4><a class="reference internal" href=#academic-and-industry-efforts>Academic and Industry Efforts</a> </li> <li class=toctree-l4><a class="reference internal" href=#distinctive-aspects-of-opossums-implementation>Distinctive Aspects of Opossum's Implementation</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#conclusion>Conclusion</a> </li> </ul> </li> <li class=toctree-l2><a href=../bot-user-simulation/ class="reference internal">Bot User Simulation</a> </li> <li class=toctree-l2><a href=../../infrastructure/optimization-strategies/ class="reference internal">Optimization Strategies</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">API Documentation</a> <ul> <li class=toctree-l2><a href=../../api/routes/ class="reference internal">Routes</a> </li> <li class=toctree-l2><a href=../../api/request-response/ class="reference internal">Request/Response</a> </li> <li class=toctree-l2><a href=../../api/oauth-configuration/ class="reference internal">OAuth Configuration</a> </li> <li class=toctree-l2><a href=../../api/error-codes/ class="reference internal">Error Codes</a> </li> <li class=toctree-l2><a href=../../api/rate-limits/ class="reference internal">Rate Limits</a> </li> <li class=toctree-l2><a href=../../api/webhooks/ class="reference internal">Webhook Integration</a> </li> <li class=toctree-l2><a href=../../api/health-endpoints/ class="reference internal">Health Endpoints</a> </li> <li class=toctree-l2><a href=../../api/compliance/ class="reference internal">Compliance</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>About</span></p> <ul> <li class=toctree-l1><a href=../../about/history/ class="reference internal">Project History</a> </li> <li class=toctree-l1><a href=../../about/team/ class="reference internal">Team</a> </li> <li class=toctree-l1><a href=../../about/roadmap/ class="reference internal">Roadmap</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=../..>Opossum Search Documentation</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=../.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>Technical Reference</li> <li class=breadcrumb-item>Infrastructure</li> <li class="breadcrumb-item active">SVG Markup</li> <li class=wy-breadcrumbs-aside> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=technical-documentation-svg-markup-generation>Technical Documentation: SVG Markup Generation<a class=headerlink href=#technical-documentation-svg-markup-generation title="Permanent link">&para;</a></h1> <h2 id=overview-llm-driven-svg-generation>Overview: LLM-Driven SVG Generation<a class=headerlink href=#overview-llm-driven-svg-generation title="Permanent link">&para;</a></h2> <p>The Opossum Search platform uses LLMs to generate SVG markup directly for creating dynamic visualizations:</p> <ol> <li>User provides a natural language request (e.g., "Show me a pie chart of opossum diet")</li> <li>LLM generates SVG markup (XML-based vector graphics)</li> <li>Server validates and returns the SVG markup</li> <li>Browser renders the SVG natively</li> </ol> <h2 id=security-analysis>Security Analysis<a class=headerlink href=#security-analysis title="Permanent link">&para;</a></h2> <h3 id=why-svg-markup-generation-is-secure>Why SVG Markup Generation is Secure<a class=headerlink href=#why-svg-markup-generation-is-secure title="Permanent link">&para;</a></h3> <ol> <li> <p><strong>Declarative vs. Procedural</strong></p> <ul> <li>SVG is <strong>declarative markup</strong>, not executable code</li> <li>Describes what to display, not how to execute operations</li> <li>No ability to access system resources or perform operations</li> </ul> </li> <li> <p><strong>Browser Rendering</strong></p> <ul> <li>SVG is rendered by the client browser, not executed on the server</li> <li>Server only passes the validated markup</li> <li>Follows same security model as other web content (HTML/CSS)</li> </ul> </li> <li> <p><strong>Validation Capabilities</strong></p> <ul> <li>SVG can be validated against known schemas</li> <li>Potential for sanitizing any scripting elements (like embedded JavaScript) <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>def</span><span class=w> </span><span class=nf>sanitize_svg</span><span class=p>(</span><span class=n>svg_markup</span><span class=p>):</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=c1># Remove any script tags or event handlers</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>sanitized</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;&lt;script.*?&lt;/script&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>svg_markup</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=n>re</span><span class=o>.</span><span class=n>DOTALL</span><span class=p>)</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>sanitized</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;on\w+=&quot;.*?&quot;&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>sanitized</span><span class=p>)</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=k>return</span> <span class=n>sanitized</span>
</code></pre></div></li> </ul> </li> </ol> <h3 id=comparison-with-script-based-drawing>Comparison with Script-Based Drawing<a class=headerlink href=#comparison-with-script-based-drawing title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Aspect</th> <th>SVG Markup Generation</th> <th>Script-Based Drawing</th> </tr> </thead> <tbody> <tr> <td><strong>Execution Model</strong></td> <td>Rendered by browser</td> <td>Executed on server</td> </tr> <tr> <td><strong>Security Risk</strong></td> <td>Low (similar to HTML)</td> <td>Very High (RCE risk)</td> </tr> <tr> <td><strong>Performance</strong></td> <td>Lightweight for server</td> <td>Resource-intensive</td> </tr> <tr> <td><strong>Scalability</strong></td> <td>High</td> <td>Low</td> </tr> <tr> <td><strong>Browser Support</strong></td> <td>Native in all modern browsers</td> <td>Requires conversion to images</td> </tr> </tbody> </table> <h2 id=implementation-advantages>Implementation Advantages<a class=headerlink href=#implementation-advantages title="Permanent link">&para;</a></h2> <ol> <li> <p><strong>Vector Graphics Benefits</strong></p> <ul> <li>Infinite scaling without quality loss</li> <li>Smaller file sizes than raster images</li> <li>Accessibility features (screen readers can access text elements)</li> </ul> </li> <li> <p><strong>Animation Capabilities</strong></p> <ul> <li>Native animation via <code>&lt;animate&gt;</code> tags</li> <li>Interactive elements possible</li> <li>No need for video processing</li> </ul> </li> <li> <p><strong>Integration with Web Technologies</strong></p> <ul> <li>Direct CSS styling</li> <li>JavaScript interactivity when needed</li> <li>Compatible with all web frameworks</li> </ul> </li> </ol> <h2 id=example-implementation>Example Implementation<a class=headerlink href=#example-implementation title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>generate_svg_visualization</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>query</span><span class=p>):</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Generate SVG markup based on user query&quot;&quot;&quot;</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    <span class=c1># Prompt design for SVG generation</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>    <span class=n>prompt</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=s2>    Generate SVG markup for a visualization showing </span><span class=si>{</span><span class=n>query</span><span class=si>}</span><span class=s2>.</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=s2>    Use only standard SVG elements (&lt;svg&gt;, &lt;rect&gt;, &lt;circle&gt;, &lt;path&gt;, etc.)</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=s2>    Ensure the viewBox is appropriate and all elements are properly structured.</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=s2>    Do not include any &lt;script&gt; elements or event handlers.</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>    <span class=c1># Get SVG from LLM</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>    <span class=n>svg_markup</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>llm_client</span><span class=o>.</span><span class=n>generate_content</span><span class=p>(</span><span class=n>prompt</span><span class=p>)</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>    <span class=c1># Validate and sanitize</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>    <span class=n>sanitized_svg</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sanitize_svg</span><span class=p>(</span><span class=n>svg_markup</span><span class=p>)</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>    <span class=c1># Return to client</span>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>    <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>        <span class=s2>&quot;content_type&quot;</span><span class=p>:</span> <span class=s2>&quot;image/svg+xml&quot;</span><span class=p>,</span>
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>        <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=n>sanitized_svg</span>
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a>    <span class=p>}</span>
</code></pre></div> <h2 id=related-research-and-implementations>Related Research and Implementations<a class=headerlink href=#related-research-and-implementations title="Permanent link">&para;</a></h2> <h3 id=academic-and-industry-efforts>Academic and Industry Efforts<a class=headerlink href=#academic-and-industry-efforts title="Permanent link">&para;</a></h3> <p>Recent research has explored the intersection of LLMs and vector graphics generation, notably:</p> <ul> <li><strong><a href=https://chat2svg.github.io/ >Chat2SVG</a></strong> (2023): Research project demonstrating direct SVG generation from natural language prompts using large language models</li> <li><strong><a href=https://github.com/microsoft/svgcode>SVGCode</a></strong> (Microsoft): Converting raster images to SVG using machine learning techniques</li> <li><strong><a href=https://facebookresearch.github.io/nougat/ >Nougat</a></strong> (Meta): Academic paper rendering model focused on mathematical notation and diagrams</li> </ul> <h3 id=distinctive-aspects-of-opossums-implementation>Distinctive Aspects of Opossum's Implementation<a class=headerlink href=#distinctive-aspects-of-opossums-implementation title="Permanent link">&para;</a></h3> <p>While building on these foundational concepts, our implementation is distinctive in several key ways:</p> <ol> <li> <p><strong>Search Integration</strong></p> <ul> <li>Context-aware visualizations that incorporate search history and domain knowledge</li> <li>Visualization as an extension of information retrieval rather than standalone generation</li> </ul> </li> <li> <p><strong>Hybrid Model Architecture</strong></p> <ul> <li>Intelligent model selection based on query complexity and visualization requirements</li> <li>Fallback mechanisms that ensure generation resilience in production environments</li> <li>Multiple model support (Gemini, Ollama-based models, local transformers)</li> </ul> </li> <li> <p><strong>Specialized Search Domain Optimizations</strong></p> <ul> <li>Domain-specific templates and knowledge integration for our subject area</li> <li>Consistency with textual search results for a unified experience</li> </ul> </li> </ol> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2> <p>SVG markup generation represents a secure, efficient approach for dynamic visualization in Opossum Search. By having LLMs generate SVG directly rather than executable code, we maintain strong security boundaries while enabling rich visual content. This approach aligns with web standards and modern best practices for content generation and rendering.</p> </div> </div><footer> <div class=rst-footer-buttons role=navigation aria-label="Footer Navigation"> <a href=../opentelemetry-integration/ class="btn btn-neutral float-left" title=OpenTelemetry><span class="icon icon-circle-arrow-left"></span> Previous</a> <a href=../bot-user-simulation/ class="btn btn-neutral float-right" title="Bot User Simulation">Next <span class="icon icon-circle-arrow-right"></span></a> </div> <hr> <div role=contentinfo> <!-- Copyright etc --> </div> Built with <a href=https://www.mkdocs.org/ >MkDocs</a> using a <a href=https://github.com/readthedocs/sphinx_rtd_theme>theme</a> provided by <a href=https://readthedocs.org>Read the Docs</a>. </footer> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span><a href=../opentelemetry-integration/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../bot-user-simulation/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../../js/jquery-3.6.0.min.js></script> <script>var base_url = "../..";</script> <script src=../../js/theme_extra.js></script> <script src=../../js/theme.js></script> <script src=../../search/main.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 