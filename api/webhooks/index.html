<!DOCTYPE html><html class=writer-html5 lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=bebo><link rel="shortcut icon" href=../../img/favicon.ico><title>Webhook Integration - Opossum Search Documentation</title><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/theme_extra.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css><script>
        // Current page data
        var mkdocs_page_name = "Webhook Integration";
        var mkdocs_page_input_path = "api\\webhooks.md";
        var mkdocs_page_url = null;
      </script><!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script></head> <body class=wy-body-for-nav role=document> <div class=wy-grid-for-nav> <nav data-toggle=wy-nav-shift class="wy-nav-side stickynav"> <div class=wy-side-scroll> <div class=wy-side-nav-search> <a href=../.. class="icon icon-home"> Opossum Search Documentation </a><div role=search> <form id=rtd-search-form class=wy-form action=../../search.html method=get> <input type=text name=q placeholder="Search docs" aria-label="Search docs" title="Type search term here"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy=affix role=navigation aria-label="Navigation menu"> <ul> <li class=toctree-l1><a class="reference internal" href=../..>Home</a> </li> </ul> <p class=caption><span class=caption-text>Getting Started</span></p> <ul> <li class=toctree-l1><a href=../../technical/getting-started/ class="reference internal">First Steps</a> </li> <li class=toctree-l1><a href=../../technical/system-architecture-overview/ class="reference internal">System Overview</a> </li> <li class=toctree-l1><a href=../getting-started/ class="reference internal">API Reference</a> </li> <li class=toctree-l1><a href=../../technical/devops-guide/ class="reference internal">Developer Quickstart</a> </li> </ul> <p class=caption><span class=caption-text>Core Components</span></p> <ul> <li class=toctree-l1><a class="reference internal">Architecture</a> <ul> <li class=toctree-l2><a href=../../technical/system-architecture-overview/ class="reference internal">System Overview</a> </li> <li class=toctree-l2><a href=../../technical/graphql-api/ class="reference internal">GraphQL API</a> </li> <li class=toctree-l2><a href=../../technical/security-model/ class="reference internal">Security Model</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Model Integration</a> <ul> <li class=toctree-l2><a href=../../model-integration/architecture/ class="reference internal">Architecture</a> </li> <li class=toctree-l2><a href=../../model-integration/backend-selection/ class="reference internal">Backend Selection</a> </li> <li class=toctree-l2><a href=../../model-integration/capability-matrix/ class="reference internal">Capability Matrix</a> </li> <li class=toctree-l2><a href=../../model-integration/providers/ class="reference internal">Provider Integration</a> </li> <li class=toctree-l2><a href=../../model-integration/configuration/ class="reference internal">Configuration</a> </li> <li class=toctree-l2><a href=../../technical/hybrid-model-selection/ class="reference internal">Hybrid Selection</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Service Availability</a> <ul> <li class=toctree-l2><a href=../../service-availability/context-and-scope/ class="reference internal">Context and Scope</a> </li> <li class=toctree-l2><a href=../../service-availability/quality-requirements/ class="reference internal">Quality Requirements</a> </li> <li class=toctree-l2><a href=../../service-availability/architecture-constraints/ class="reference internal">Architecture Constraints</a> </li> <li class=toctree-l2><a href=../../service-availability/availability-monitoring/ class="reference internal">Availability Monitoring</a> </li> <li class=toctree-l2><a href=../../service-availability/service-outage/ class="reference internal">Error Handling</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Resilience Patterns</a> <ul> <li class=toctree-l2><a href=../../technical/resilience-patterns/ class="reference internal">Core Strategies</a> </li> <li class=toctree-l2><a href=../../technical/error-handling-resilience/ class="reference internal">Error Handling</a> </li> <li class=toctree-l2><a href=../../service-availability/rate-limiting-throttling/ class="reference internal">Rate Limiting</a> </li> <li class=toctree-l2><a href=../../service-availability/log-alerts/ class="reference internal">Logging and Alerts</a> </li> <li class=toctree-l2><a href=../../service-availability/testing-validation/ class="reference internal">Testing and Validation</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Features</span></p> <ul> <li class=toctree-l1><a class="reference internal">Conversation</a> <ul> <li class=toctree-l2><a href=../../conversation/topic-detection/ class="reference internal">Topic Detection</a> </li> <li class=toctree-l2><a href=../../conversation/conversation-flow/ class="reference internal">Conversation Flow</a> </li> <li class=toctree-l2><a href=../../conversation/response-generation/ class="reference internal">Response Generation</a> </li> <li class=toctree-l2><a href=../../conversation/nlp-components/ class="reference internal">NLP Components</a> </li> <li class=toctree-l2><a href=../../conversation/markov-generation/ class="reference internal">Markov Generation</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Image Processing</a> <ul> <li class=toctree-l2><a href=../../image-processing/overview/ class="reference internal">Overview</a> </li> <li class=toctree-l2><a href=../../image-processing/effects/ class="reference internal">Effects and Filters</a> </li> <li class=toctree-l2><a href=../../image-processing/svg-generation/ class="reference internal">SVG Generation</a> </li> <li class=toctree-l2><a href=../../image-processing/optimization/ class="reference internal">Performance Optimization</a> </li> <li class=toctree-l2><a href=../../image-processing/caching/ class="reference internal">Caching Strategy</a> </li> </ul> </li> <li class=toctree-l1><a class="reference internal">Visualizations & Fun</a> <ul> <li class=toctree-l2><a href=../../features/service-vizualizations/ class="reference internal">Service Visualizations</a> </li> <li class=toctree-l2><a href=../../features/national-day/ class="reference internal">National Opossum Day</a> </li> <li class=toctree-l2><a href=../../features/easter-eggs/ class="reference internal">Easter Eggs</a> </li> <li class=toctree-l2><a href=../../features/special-events/ class="reference internal">Special Events</a> </li> <li class=toctree-l2><a href=../../features/background-stories/ class="reference internal">Background Stories</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>Technical Reference</span></p> <ul class=current> <li class=toctree-l1><a class="reference internal">Infrastructure</a> <ul> <li class=toctree-l2><a href=../../technical/redis-caching-architecture/ class="reference internal">Redis Caching</a> </li> <li class=toctree-l2><a href=../../technical/image-processing-pipeline/ class="reference internal">Image Pipeline</a> </li> <li class=toctree-l2><a href=../../technical/opentelemetry-integration/ class="reference internal">OpenTelemetry</a> </li> <li class=toctree-l2><a href=../../technical/svg-markup/ class="reference internal">SVG Markup</a> </li> <li class=toctree-l2><a href=../../technical/bot-user-simulation/ class="reference internal">Bot User Simulation</a> </li> <li class=toctree-l2><a href=../../infrastructure/optimization-strategies/ class="reference internal">Optimization Strategies</a> </li> </ul> </li> <li class="toctree-l1 current"><a class="reference internal current">API Documentation</a> <ul class=current> <li class=toctree-l2><a href=../routes/ class="reference internal">Routes</a> </li> <li class=toctree-l2><a href=../request-response/ class="reference internal">Request/Response</a> </li> <li class=toctree-l2><a href=../oauth-configuration/ class="reference internal">OAuth Configuration</a> </li> <li class=toctree-l2><a href=../error-codes/ class="reference internal">Error Codes</a> </li> <li class=toctree-l2><a href=../rate-limits/ class="reference internal">Rate Limits</a> </li> <li class="toctree-l2 current"><a class="reference internal current" href=#>Webhook Integration</a> <ul class=current> <li class=toctree-l3><a class="reference internal" href=#overview>Overview</a> </li> <li class=toctree-l3><a class="reference internal" href=#what-are-webhooks>What are Webhooks?</a> </li> <li class=toctree-l3><a class="reference internal" href=#webhook-events>Webhook Events</a> </li> <li class=toctree-l3><a class="reference internal" href=#setting-up-webhooks>Setting Up Webhooks</a> <ul> <li class=toctree-l4><a class="reference internal" href=#dashboard-configuration>Dashboard Configuration</a> </li> <li class=toctree-l4><a class="reference internal" href=#api-configuration>API Configuration</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#webhook-payload-format>Webhook Payload Format</a> <ul> <li class=toctree-l4><a class="reference internal" href=#event-specific-payloads>Event-Specific Payloads</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#webhook-signature-verification>Webhook Signature Verification</a> <ul> <li class=toctree-l4><a class="reference internal" href=#example-verification-nodejs>Example Verification (Node.js)</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#webhook-best-practices>Webhook Best Practices</a> <ul> <li class=toctree-l4><a class="reference internal" href=#security>Security</a> </li> <li class=toctree-l4><a class="reference internal" href=#reliability>Reliability</a> </li> <li class=toctree-l4><a class="reference internal" href=#monitoring>Monitoring</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#webhook-delivery>Webhook Delivery</a> <ul> <li class=toctree-l4><a class="reference internal" href=#retry-policy>Retry Policy</a> </li> <li class=toctree-l4><a class="reference internal" href=#testing-webhooks>Testing Webhooks</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#webhook-logs>Webhook Logs</a> </li> <li class=toctree-l3><a class="reference internal" href=#managing-webhooks>Managing Webhooks</a> <ul> <li class=toctree-l4><a class="reference internal" href=#listing-webhooks>Listing Webhooks</a> </li> <li class=toctree-l4><a class="reference internal" href=#updating-a-webhook>Updating a Webhook</a> </li> <li class=toctree-l4><a class="reference internal" href=#deleting-a-webhook>Deleting a Webhook</a> </li> </ul> </li> <li class=toctree-l3><a class="reference internal" href=#webhook-quotas-and-limits>Webhook Quotas and Limits</a> </li> <li class=toctree-l3><a class="reference internal" href=#troubleshooting>Troubleshooting</a> <ul> <li class=toctree-l4><a class="reference internal" href=#webhook-not-receiving-events>Webhook Not Receiving Events</a> </li> <li class=toctree-l4><a class="reference internal" href=#failed-signature-verification>Failed Signature Verification</a> </li> <li class=toctree-l4><a class="reference internal" href=#events-missing-or-delayed>Events Missing or Delayed</a> </li> </ul> </li> </ul> </li> <li class=toctree-l2><a href=../health-endpoints/ class="reference internal">Health Endpoints</a> </li> <li class=toctree-l2><a href=../compliance/ class="reference internal">Compliance</a> </li> </ul> </li> </ul> <p class=caption><span class=caption-text>About</span></p> <ul> <li class=toctree-l1><a href=../../about/history/ class="reference internal">Project History</a> </li> <li class=toctree-l1><a href=../../about/team/ class="reference internal">Team</a> </li> <li class=toctree-l1><a href=../../about/roadmap/ class="reference internal">Roadmap</a> </li> </ul> </div> </div> </nav> <section data-toggle=wy-nav-shift class=wy-nav-content-wrap> <nav class=wy-nav-top role=navigation aria-label="Mobile navigation menu"> <i data-toggle=wy-nav-top class="fa fa-bars"></i> <a href=../..>Opossum Search Documentation</a> </nav> <div class=wy-nav-content> <div class=rst-content><div role=navigation aria-label="breadcrumbs navigation"> <ul class=wy-breadcrumbs> <li><a href=../.. class="icon icon-home" aria-label=Docs></a></li> <li class=breadcrumb-item>Technical Reference</li> <li class=breadcrumb-item>API Documentation</li> <li class="breadcrumb-item active">Webhook Integration</li> <li class=wy-breadcrumbs-aside> </li> </ul> <hr> </div> <div role=main class=document itemscope=itemscope itemtype=http://schema.org/Article> <div class=section itemprop=articleBody> <h1 id=webhooks>Webhooks<a class=headerlink href=#webhooks title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Opossum Search provides webhooks to notify your application about events as they happen. This document covers webhook configuration, event types, payload format, and best practices for processing webhook events. For a list of available API routes, see <a href=../routes/ >API Routes</a>. For detailed information about request and response formats, see <a href=../request-response/ >Request/Response Documentation</a>. For error code details, see <a href=../error-codes/ >Error Codes</a>. Information on API usage limits can be found in <a href=../rate-limits/ >Rate Limits</a>. For system status and component health, see <a href=../health-endpoints/ >Health Endpoints</a>.</p> <h2 id=what-are-webhooks>What are Webhooks?<a class=headerlink href=#what-are-webhooks title="Permanent link">&para;</a></h2> <p>Webhooks are HTTP callbacks that allow Opossum Search to send real-time notifications to your application when specific events occur. Rather than polling the API for updates, your application can receive automatic notifications.</p> <h2 id=webhook-events>Webhook Events<a class=headerlink href=#webhook-events title="Permanent link">&para;</a></h2> <p>Opossum Search supports the following webhook event types:</p> <table> <thead> <tr> <th>Event Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>search.completed</code></td> <td>A search operation has completed</td> </tr> <tr> <td><code>analysis.completed</code></td> <td>An image or content analysis has completed</td> </tr> <tr> <td><code>conversation.updated</code></td> <td>A conversation has been updated with new messages</td> </tr> <tr> <td><code>model.status_changed</code></td> <td>An AI model's status has changed (online/offline)</td> </tr> <tr> <td><code>system.status_changed</code></td> <td>The system status has changed</td> </tr> <tr> <td><code>job.completed</code></td> <td>A long-running job has completed</td> </tr> <tr> <td><code>error.threshold_exceeded</code></td> <td>Error rate has exceeded configured threshold</td> </tr> <tr> <td><code>cache.invalidated</code></td> <td>Cache for specified resources has been invalidated</td> </tr> <tr> <td><code>quota.threshold_reached</code></td> <td>Usage quota has reached a configured threshold</td> </tr> <tr> <td><code>user.action_required</code></td> <td>User action is required (e.g., payment, verification)</td> </tr> </tbody> </table> <h2 id=setting-up-webhooks>Setting Up Webhooks<a class=headerlink href=#setting-up-webhooks title="Permanent link">&para;</a></h2> <h3 id=dashboard-configuration>Dashboard Configuration<a class=headerlink href=#dashboard-configuration title="Permanent link">&para;</a></h3> <ol> <li>Navigate to the Opossum Search Developer Dashboard</li> <li>Go to <strong>Settings</strong> &gt; <strong>Webhooks</strong></li> <li>Click <strong>Add Endpoint</strong></li> <li>Configure your webhook:<ul> <li>Endpoint URL: Your server's URL to receive webhook events</li> <li>Events: Select which events to subscribe to</li> <li>Secret: Generate a secret to verify webhook payloads</li> <li>Description: Optional description for your reference</li> </ul> </li> </ol> <h3 id=api-configuration>API Configuration<a class=headerlink href=#api-configuration title="Permanent link">&para;</a></h3> <p>You can also configure webhooks programmatically:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>POST /webhooks
</code></pre></div> <p>Request body:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>{</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://example.com/webhooks/opossum&quot;</span><span class=p>,</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>&quot;events&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;search.completed&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;model.status_changed&quot;</span><span class=p>],</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Production webhook for search notifications&quot;</span><span class=p>,</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>  </span><span class=nt>&quot;active&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>  </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;v1&quot;</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=p>}</span>
</code></pre></div> <h2 id=webhook-payload-format>Webhook Payload Format<a class=headerlink href=#webhook-payload-format title="Permanent link">&para;</a></h2> <p>All webhook payloads follow this standard format:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=p>{</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;evt_8f7h6g5j4k3l2j1k&quot;</span><span class=p>,</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>&quot;created&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2023-03-15T14:32:45Z&quot;</span><span class=p>,</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;search.completed&quot;</span><span class=p>,</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=c1>// Event-specific data</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>  </span><span class=nt>&quot;account&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;acc_1234567890&quot;</span><span class=p>,</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>  </span><span class=nt>&quot;api_version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;v1&quot;</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=p>}</span>
</code></pre></div> <h3 id=event-specific-payloads>Event-Specific Payloads<a class=headerlink href=#event-specific-payloads title="Permanent link">&para;</a></h3> <h4 id=searchcompleted><code>search.completed</code><a class=headerlink href=#searchcompleted title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>{</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;evt_8f7h6g5j4k3l2j1k&quot;</span><span class=p>,</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>&quot;created&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2023-03-15T14:32:45Z&quot;</span><span class=p>,</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;search.completed&quot;</span><span class=p>,</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>    </span><span class=nt>&quot;search_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;srch_1234567890&quot;</span><span class=p>,</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>    </span><span class=nt>&quot;query&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;opossum behavior&quot;</span><span class=p>,</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>    </span><span class=nt>&quot;duration_ms&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>432</span><span class=p>,</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>    </span><span class=nt>&quot;result_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>15</span><span class=p>,</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>    </span><span class=nt>&quot;model_used&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;gemini&quot;</span><span class=p>,</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>    </span><span class=nt>&quot;cache_hit&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>  </span><span class=nt>&quot;account&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;acc_1234567890&quot;</span><span class=p>,</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>  </span><span class=nt>&quot;api_version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;v1&quot;</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=p>}</span>
</code></pre></div> <h4 id=modelstatus_changed><code>model.status_changed</code><a class=headerlink href=#modelstatus_changed title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>{</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;evt_8f7h6g5j4k3l2j1k&quot;</span><span class=p>,</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=nt>&quot;created&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2023-03-15T14:32:45Z&quot;</span><span class=p>,</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;model.status_changed&quot;</span><span class=p>,</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=nt>&quot;model&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;gemini&quot;</span><span class=p>,</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>    </span><span class=nt>&quot;previous_status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;online&quot;</span><span class=p>,</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>    </span><span class=nt>&quot;current_status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;degraded&quot;</span><span class=p>,</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>    </span><span class=nt>&quot;reason&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;increased_latency&quot;</span><span class=p>,</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>    </span><span class=nt>&quot;estimated_recovery&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2023-03-15T15:00:00Z&quot;</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>  </span><span class=nt>&quot;account&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;acc_1234567890&quot;</span><span class=p>,</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=w>  </span><span class=nt>&quot;api_version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;v1&quot;</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=p>}</span>
</code></pre></div> <h2 id=webhook-signature-verification>Webhook Signature Verification<a class=headerlink href=#webhook-signature-verification title="Permanent link">&para;</a></h2> <p>For security, all webhooks include a signature header that you should verify:</p> <ol> <li>Opossum Search signs the payload using HMAC-SHA256 with your webhook secret</li> <li>The signature is included in the <code>X-Opossum-Signature</code> header</li> <li>Verify this signature to ensure the webhook is authentic</li> </ol> <h3 id=example-verification-nodejs>Example Verification (Node.js)<a class=headerlink href=#example-verification-nodejs title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kd>const</span><span class=w> </span><span class=nx>crypto</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>require</span><span class=p>(</span><span class=s1>&#39;crypto&#39;</span><span class=p>);</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=kd>function</span><span class=w> </span><span class=nx>verifyWebhookSignature</span><span class=p>(</span><span class=nx>payload</span><span class=p>,</span><span class=w> </span><span class=nx>header</span><span class=p>,</span><span class=w> </span><span class=nx>secret</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signature</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>crypto</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=p>.</span><span class=nx>createHmac</span><span class=p>(</span><span class=s1>&#39;sha256&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>secret</span><span class=p>)</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=p>.</span><span class=nx>update</span><span class=p>(</span><span class=nx>payload</span><span class=p>)</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=p>.</span><span class=nx>digest</span><span class=p>(</span><span class=s1>&#39;hex&#39;</span><span class=p>);</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>crypto</span><span class=p>.</span><span class=nx>timingSafeEqual</span><span class=p>(</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>    </span><span class=nx>Buffer</span><span class=p>.</span><span class=kr>from</span><span class=p>(</span><span class=nx>signature</span><span class=p>),</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>    </span><span class=nx>Buffer</span><span class=p>.</span><span class=kr>from</span><span class=p>(</span><span class=nx>header</span><span class=p>)</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>  </span><span class=p>);</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=p>}</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=c1>// In your webhook handler</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/webhooks/opossum&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>payload</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>);</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signature</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;x-opossum-signature&#39;</span><span class=p>];</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>webhookSecret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>OPOSSUM_WEBHOOK_SECRET</span><span class=p>;</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>verifyWebhookSignature</span><span class=p>(</span><span class=nx>payload</span><span class=p>,</span><span class=w> </span><span class=nx>signature</span><span class=p>,</span><span class=w> </span><span class=nx>webhookSecret</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mf>401</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Invalid signature&#39;</span><span class=p>);</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>  </span><span class=c1>// Process the webhook</span>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=w>  </span><span class=c1>// Handle different event types</span>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=w>  </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;search.completed&#39;</span><span class=o>:</span>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=w>      </span><span class=nx>handleSearchCompleted</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a><span class=w>    </span><span class=c1>// Handle other event types</span>
<a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a>
<a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a><span class=w>  </span><span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mf>200</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Webhook received&#39;</span><span class=p>);</span>
<a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a><span class=p>});</span>
</code></pre></div> <h2 id=webhook-best-practices>Webhook Best Practices<a class=headerlink href=#webhook-best-practices title="Permanent link">&para;</a></h2> <h3 id=security>Security<a class=headerlink href=#security title="Permanent link">&para;</a></h3> <ol> <li><strong>Always verify signatures</strong>: Validate the <code>X-Opossum-Signature</code> header</li> <li><strong>Use HTTPS endpoints</strong>: Ensure webhook URLs use HTTPS</li> <li><strong>Rotate webhook secrets</strong>: Periodically update your webhook secrets</li> <li><strong>Implement IP filtering</strong>: Optionally restrict to Opossum Search IP ranges</li> </ol> <h3 id=reliability>Reliability<a class=headerlink href=#reliability title="Permanent link">&para;</a></h3> <ol> <li><strong>Return 2xx quickly</strong>: Respond with a 2xx status code as soon as possible</li> <li><strong>Process asynchronously</strong>: Handle webhook logic outside the request-response cycle</li> <li><strong>Implement idempotency</strong>: Handle duplicate webhook deliveries gracefully</li> <li><strong>Store raw payloads</strong>: Save raw webhook data before processing</li> </ol> <h3 id=monitoring>Monitoring<a class=headerlink href=#monitoring title="Permanent link">&para;</a></h3> <ol> <li><strong>Log webhook receipts</strong>: Keep records of all received webhooks</li> <li><strong>Track processing success</strong>: Monitor webhook processing success rates</li> <li><strong>Set up alerts</strong>: Create alerts for webhook delivery failures</li> <li><strong>Check webhook dashboard</strong>: Use the Opossum Search dashboard to view delivery stats</li> </ol> <h2 id=webhook-delivery>Webhook Delivery<a class=headerlink href=#webhook-delivery title="Permanent link">&para;</a></h2> <h3 id=retry-policy>Retry Policy<a class=headerlink href=#retry-policy title="Permanent link">&para;</a></h3> <p>If your endpoint returns a non-2xx response, Opossum Search will retry with this schedule:</p> <ol> <li>Initial retry: 5 seconds</li> <li>Second retry: 30 seconds</li> <li>Third retry: 5 minutes</li> <li>Fourth retry: 30 minutes</li> <li>Fifth retry: 2 hours</li> <li>Final retry: 5 hours</li> </ol> <p>After all retry attempts fail, the webhook will be marked as failed in the dashboard.</p> <h3 id=testing-webhooks>Testing Webhooks<a class=headerlink href=#testing-webhooks title="Permanent link">&para;</a></h3> <p>The dashboard provides a "Test Webhook" feature to send sample events to your endpoint:</p> <ol> <li>Go to <strong>Settings</strong> &gt; <strong>Webhooks</strong></li> <li>Select a configured webhook</li> <li>Click <strong>Test Webhook</strong></li> <li>Choose an event type</li> <li>Send the test event</li> </ol> <p>You can also use the API to test webhooks:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>POST /webhooks/{webhook_id}/test
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=p>{</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nt>&quot;event_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;search.completed&quot;</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=p>}</span>
</code></pre></div> <h2 id=webhook-logs>Webhook Logs<a class=headerlink href=#webhook-logs title="Permanent link">&para;</a></h2> <p>The dashboard provides logs of all webhook delivery attempts:</p> <ol> <li>Event ID</li> <li>Timestamp</li> <li>Destination URL</li> <li>Response status</li> <li>Response time</li> <li>Retry count</li> </ol> <p>Logs are retained for 30 days.</p> <h2 id=managing-webhooks>Managing Webhooks<a class=headerlink href=#managing-webhooks title="Permanent link">&para;</a></h2> <h3 id=listing-webhooks>Listing Webhooks<a class=headerlink href=#listing-webhooks title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>GET /webhooks
</code></pre></div> <h3 id=updating-a-webhook>Updating a Webhook<a class=headerlink href=#updating-a-webhook title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>PATCH /webhooks/{webhook_id}
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=p>{</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>&quot;events&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;search.completed&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;analysis.completed&quot;</span><span class=p>],</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nt>&quot;active&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=p>}</span>
</code></pre></div> <h3 id=deleting-a-webhook>Deleting a Webhook<a class=headerlink href=#deleting-a-webhook title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>DELETE /webhooks/{webhook_id}
</code></pre></div> <h2 id=webhook-quotas-and-limits>Webhook Quotas and Limits<a class=headerlink href=#webhook-quotas-and-limits title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Plan</th> <th>Max Webhook Endpoints</th> <th>Max Events per Minute</th> <th>Event Retention</th> </tr> </thead> <tbody> <tr> <td>Basic</td> <td>5</td> <td>60</td> <td>7 days</td> </tr> <tr> <td>Professional</td> <td>20</td> <td>300</td> <td>30 days</td> </tr> <tr> <td>Enterprise</td> <td>100</td> <td>1,200</td> <td>90 days</td> </tr> </tbody> </table> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <p>Common webhook issues and solutions:</p> <h3 id=webhook-not-receiving-events>Webhook Not Receiving Events<a class=headerlink href=#webhook-not-receiving-events title="Permanent link">&para;</a></h3> <ol> <li>Check the webhook's status in the dashboard</li> <li>Verify the endpoint URL is correct and accessible</li> <li>Ensure your server accepts POST requests</li> <li>Check that you're subscribed to the expected events</li> </ol> <h3 id=failed-signature-verification>Failed Signature Verification<a class=headerlink href=#failed-signature-verification title="Permanent link">&para;</a></h3> <ol> <li>Confirm you're using the correct webhook secret</li> <li>Ensure you're validating against the raw request body</li> <li>Check for any body parsing middleware that might modify the payload</li> </ol> <h3 id=events-missing-or-delayed>Events Missing or Delayed<a class=headerlink href=#events-missing-or-delayed title="Permanent link">&para;</a></h3> <ol> <li>Check webhook logs for delivery failures</li> <li>Verify your endpoint responds with 2xx status codes</li> <li>Check for rate limiting on your server</li> <li>Ensure your server can handle concurrent webhook requests</li> </ol> </div> </div><footer> <div class=rst-footer-buttons role=navigation aria-label="Footer Navigation"> <a href=../rate-limits/ class="btn btn-neutral float-left" title="Rate Limits"><span class="icon icon-circle-arrow-left"></span> Previous</a> <a href=../health-endpoints/ class="btn btn-neutral float-right" title="Health Endpoints">Next <span class="icon icon-circle-arrow-right"></span></a> </div> <hr> <div role=contentinfo> <!-- Copyright etc --> </div> Built with <a href=https://www.mkdocs.org/ >MkDocs</a> using a <a href=https://github.com/readthedocs/sphinx_rtd_theme>theme</a> provided by <a href=https://readthedocs.org>Read the Docs</a>. </footer> </div> </div> </section> </div> <div class=rst-versions role=note aria-label=Versions> <span class=rst-current-version data-toggle=rst-current-version> <span><a href=../rate-limits/ style="color: #fcfcfc">&laquo; Previous</a></span> <span><a href=../health-endpoints/ style="color: #fcfcfc">Next &raquo;</a></span> </span> </div> <script src=../../js/jquery-3.6.0.min.js></script> <script>var base_url = "../..";</script> <script src=../../js/theme_extra.js></script> <script src=../../js/theme.js></script> <script src=../../search/main.js></script> <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script> </body> </html> 